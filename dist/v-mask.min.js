!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueMask={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var a=[];function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function c(e){for(var t,r=[];-1!==(t=e.indexOf("[]"));)r.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:r}}var f=[];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!u(r)){if("function"!==t(r))throw new Error("Text-mask:conformToMask; The mask property must be an array.");r=c(r=r(e,n)).maskWithoutCaretTraps}var o=n.guide,a=void 0===o||o,l=n.previousConformedValue,s=void 0===l?"":l,p=n.placeholderChar,v=void 0===p?"_":p,d=n.placeholder,h=void 0===d?i(r,v):d,y=n.currentCaretPosition,m=n.keepCharPositions,b=!1===a&&void 0!==s,g=e.length,O=s.length,k=h.length,w=r.length,j=g-O,P=j>0,x=y+(P?-j:0),E=x+Math.abs(j);if(!0===m&&!P){for(var T="",S=x;S<E;S++)h[S]===v&&(T+=v);e=e.slice(0,x)+T+e.slice(x,g)}for(var M=e.split("").map((function(e,t){return{char:e,isNew:t>=x&&t<E}})),V=g-1;V>=0;V--){var C=M[V].char;if(C!==v){var _=V>=x&&O===w;C===h[_?V-j:V]&&M.splice(V,1)}}var A="",N=!1;e:for(var D=0;D<k;D++){var R=h[D];if(R===v){if(M.length>0)for(;M.length>0;){var U=M.shift(),z=U.char,H=U.isNew;if(z===v&&!0!==b){A+=v;continue e}if(r[D].test(z)){if(!0===m&&!1!==H&&""!==s&&!1!==a&&P){for(var I=M.length,J=null,L=0;L<I;L++){var W=M[L];if(W.char!==v&&!1===W.isNew)break;if(W.char===v){J=L;break}}null!==J?(A+=z,M.splice(J,1)):D--}else A+=z;continue e}N=!0}!1===b&&(A+=h.substr(D,k));break}A+=R}if(b&&!1===P){for(var $=null,q=0;q<A.length;q++)h[q]===v&&($=q);A=null!==$?A.substr(0,$+1):""}return{conformedValue:A,meta:{someCharsRejected:N}}}var s={__nextCharOptional__:!0},p={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":s,X:/./},v=function(e){return t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),r=t.lastIndexOf("/"),new RegExp(t.slice(1,r),t.slice(r+1));var t,r},d=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};var h=function(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)},y=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e};var m=function(){var e=new Map,t={previousValue:"",mask:[]};function r(r){return e.get(r)||o({},t)}return{partiallyUpdate:function(t,n){e.set(t,o({},r(t),{},n))},remove:function(t){e.delete(t)},get:r}}();function b(e){h.bind(null,e,"input")()}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.value,n=m.get(e),o=n.previousValue,a=n.mask,i=r!==o,u=r.length>o.length,c=r&&i&&u;if(t||c){var f=l(r,a,{guide:!1}),s=f.conformedValue;e.value=s,b(e)}m.partiallyUpdate(e,{previousValue:r})}function O(e,t){var r;m.partiallyUpdate(e,{mask:(r=t,r.split("").map((function(e,t,r){var n=p[e]||e,o=r[t-1];return n===s?null:(p[o]||o)===s?v(d(n)):n})).filter(Boolean))})}var k={bind:function(e,t){var r=t.value;O(e=y(e),r),g(e)},componentUpdated:function(e,t){var r=t.value,n=t.oldValue;e=y(e);var o=r!==n;o&&O(e,r),g(e,o)},unbind:function(e){e=y(e),m.remove(e)}},w=function(e){e.directive("mask",k)};e.VueMaskDirective=k,e.VueMaskPlugin=w,e.default=w,Object.defineProperty(e,"__esModule",{value:!0})}));
